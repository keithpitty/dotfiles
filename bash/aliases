# Edit (using Sublime Text 2)
alias e='subl'

# Rails 3
alias rs='rails s'
alias rc='rails c'
alias rd='rails db'
alias rg='rails g'Â 

# Rails 2
alias ss='./script/server'
alias sc='./script/console'
alias sd='./script/dbconsole'
alias sg='./script/generate'
alias sp='./script/plugin install'

#Passenger
alias pss='passenger start'

#Grep within processes
alias psg='ps -ef | grep '

#Rake
alias rmg='bundle exec rake db:migrate'
alias rtp='bundle exec rake db:test:prepare'

# Ruby
alias irb='irb --readline -r irb/completion'
alias rii='ri -Tf ansi'

# Bundler
alias be='bundle exec'
alias bi='bundle install'

# Pry
alias pr='pry -r ./config/environment'

# Cucumber
alias c='cucumber'
alias cf='cucumber features'
alias ct='cucumber --tags'

# autotest
alias at='autotest'
alias atf='AUTOFEATURE=true autotest'

# Capistrano
alias capsd='cap staging deploy'

# Shotgun
alias sg='shotgun'

# Change to directories
alias ..='cd ..'
alias cdb='cd ~/Blake'
alias cdba='cd ~/Blake/blake-admin'
alias cdbc='cd ~/Blake/blake-common'
alias cdbd='cd ~/Blake/blake/shared/detachment'
alias cdbj='cd ~/work/bananajour'
alias cdbr='cd ~/Blake/book-reader-lib'
alias cdbs='cd ~/Blake/book-source'
alias cdcs='cd ~/work/cockatoo'
alias cddf='cd ~/bin/dotfiles'
alias cddl='cd ~/Downloads'
alias cded='cd ~/Blake/eggspress-data'
alias cdep='cd ~/work/ediblepatch'
alias cdgc='cd ~/work/golfcentralcoast'
alias cdgf='cd ~/work/greatfit'
alias cdh='cd ~'
alias cdhw='cd ~/work/Myhealthworks'
alias cdig='cd ~/work/ideagora'
alias cdkp='cd ~/work/kpdotcom'
alias cdlo='cd ~/work/leadingohs'
alias cdmh='cd ~/work/media-hub'
alias cdra='cd ~/work/ruby.org.au'
alias cdr9='cd ~/work/rc9peeps'
alias cdre='cd ~/Blake/readingeggs'
alias cdrn='cd ~/Blake/re-non-admin/readingeggs'
alias cdrp='cd ~/play/refinerycms-play'
alias cdrs='cd ~/Blake/readingeggs-shared'
alias cdsk='cd ~/work/skinners'
alias cdwd='cd ~/play/whinkingdrisky'
alias cdxs='cd ~/Blake/reading-eggspress-student'

# Processes
alias tu='top -o cpu' #cpu
alias tm='top -o vsize' # memory

# Abbreviated bash commands
alias h='history'
alias l='ls -l'
alias ll='ls -l'
alias la='ls -al'
alias lh='ls -lh'
alias lg='ls -lG'
# Create a directory and change to it
function take {
	mkdir $1
	cd $1
}

# Quick editing and reloading
alias reload='source ~/.bashrc' # reload shell
alias ea='subl ~/bin/dotfiles/bash/aliases && reload' # edit aliases and reload

# MySQL

alias ms=/usr/local/mysql/bin/mysql
alias mysql=/usr/local/mysql/bin/mysql
alias mysqladmin=/usr/local/mysql/bin/mysqladmin
alias msa=/usr/local/mysql/bin/mysqladmin
alias mst='sudo mysqld_safe'
alias msp='mysqladmin -u root shutdown'
function msd {
  mysqldump --add-locks -e -n -t $1 -u root > db/$1.sql
}
function msl {
  mysql $1 -u root < db/$1.sql
}

# Apache
alias apr='sudo /usr/sbin/apachectl restart'
alias apst='sudo /usr/sbin/apachectl -k start'
alias apsp='sudo /usr/sbin/apachectl graceful-stop'
alias apce='sudo mate /private/etc/apache2/httpd.conf' #edit apache config

# Git

# As the name implies, show the name of the current branch
function git_current_branch() {
  git symbolic-ref HEAD 2> /dev/null | sed -e 's/refs\/heads\///'
}

alias g='git status'
alias gi='git init'
alias ga='git add'
alias gau='git add -u'
alias gb='git branch'
alias gba='git branch -a'
alias gbd='git branch -d'
alias gbdd='git branch -D'
alias gc='git commit -v'
alias gca='git commit -v -a'
alias gcm='git commit --amend'
alias gco='git checkout'
alias gcb='git checkout -b'
alias gd='git diff'
alias gdm='git diff master'
alias gf='git fetch'
alias gfi='git flow init'
alias gff='git flow feature'
alias gfr='git flow release'
alias gl='git l'
alias gp='git push origin HEAD:$(git_current_branch)'
alias gpb='git push banana master'
alias gst='git status'
alias gr='git rebase -p'
alias grc='git rebase --continue'
alias grs='git rebase --skip'
alias gm='git merge --no-ff'
alias gmt='git mergetool'
alias gk='gitk'
alias gx='gitx'
alias gph='git push heroku'
alias gup='git fetch origin && gr origin/$(git_current_branch)'
alias gph='git push heroku master'

# Commit pending changes and quote all args as message
function gg() {
	git commit -v -a -m "$*"
}
# Set up a tracking branch from [remote] [branch_name]
function gbt() {
	git branch --track $2 $1/$2
	git checkout $2
}
# Delete branch
function gbd() {
  git branch -d $1
}
# Create and checkout branch
function gcob() {
  git checkout -b $1
}
# Add remote repo on unfuddle
function gru() {
  git remote add origin git@cockatoosoftware.unfuddle.com:cockatoosoftware/$1.git
  git config remote.origin.push refs/heads/master:refs/heads/master
}
# Add remote repo on github
function grg() {
	git remote add origin git@github.com:keithpitty/$1.git
	git push origin master
}

# grb
alias grbc='grb create'

function parse_git_dirty {
  [[ $(git status 2> /dev/null | tail -n1) != "nothing to commit (working directory clean)" ]] && echo "[*]"
}
function parse_git_branch {
  git branch --no-color 2> /dev/null | sed -e '/^[^*]/d' -e "s/* \(.*\)/\1$(parse_git_dirty)/"
}

# rvm
alias rvmk='cp .rvmrc_keith .rvmrc'

# mongodb
alias md='mongod run --config /usr/local/Cellar/mongodb/1.8.1-x86_64/mongod.conf'

# Blake
# deploy branch to integration: initial setup and deploy
function cids() {
  export BRANCH=$1 &&
  cap integration deploy:setup && 
  cap integration deploy &&
  cap integration branches:create_db &&
  cap integration branches:load_production_clone &&
  cap integration deploy:migrate &&
  cap integration data:run_all &&
  cap integration deploy:restart &&
  unset BRANCH
}

#later deploys
function cid() {
  export BRANCH=$1 &&
  cap integration deploy &&
  cap integration deploy:migrate &&
  cap integration data:run_all &&
  cap integration deploy:restart &&
  unset BRANCH
}

# Reading Eggs
function rema() {
  scp reci:Sites/reports/map$1assets.txt .''
}

function rema1to8() {
  scp reci:Sites/reports/map01assets.txt .''
  scp reci:Sites/reports/map02assets.txt .''
  scp reci:Sites/reports/map03assets.txt .''
  scp reci:Sites/reports/map04assets.txt .''
  scp reci:Sites/reports/map05assets.txt .''
  scp reci:Sites/reports/map06assets.txt .''
  scp reci:Sites/reports/map07assets.txt .''
  scp reci:Sites/reports/map08assets.txt .''
}

alias redi="rsync -vzru --size-only --stats --delete --exclude='Thumbs.db' --exclude='.DS_Store' --exclude='.git' --exclude='.svn' rei:/Users/integrity/.integration_server/shared/bootstrap/ ~/work/readingeggs/public/bootstrap"