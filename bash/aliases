# Rails 3
alias rs='rails s'
alias rc='rails c'
alias rd='rails db'
alias rg='rails g'

# Rails 2
alias ss='./script/server'
alias sc='./script/console'
alias sd='./script/dbconsole'
alias sg='./script/generate'
alias sp='./script/plugin install'

#Passenger
alias pss='passenger start'

#Grep within processes
alias psg='ps -ef | grep '

#Rake
alias r='rake'
alias rmg='rake db:migrate'
alias rtp='rake db:test:prepare'

# Ruby
alias irb='irb --readline -r irb/completion'
alias rii='ri -Tf ansi'
alias gemi='sudo gem install'
alias gemin='sudo gem install --no-rdoc --no-ri'
alias gemu='sudo gem uninstall'
function gemiv {
  sudo gem install $1 -v $2
}

# RSpec
alias rsm='spec spec/models'

# Cucumber
alias c='cucumber'
alias cf='cucumber features'
alias ct='cucumber --tags'

# autotest
alias at='autotest'
alias atf='AUTOFEATURE=true autotest'

# Capistrano
alias capsd='cap staging deploy'

# Shotgun
alias sg='shotgun'

# Change to directories
alias ..='cd ..'
alias cdh='cd ~'
alias cddf='cd ~/bin/dotfiles'
alias cddl='cd ~/Downloads'
alias cdcs='cd ~/work/cockatoo'
alias cdkp='cd ~/work/kpdotcom'
alias cdir='cd ~/work/isitrorosydyet'
alias cdre='cd ~/work/readingeggs'
alias cdrea='cd ~/work/readingeggs-alt/readingeggs'
alias cdsw='cd ~/work/swellnet'
alias cdrt='cd ~/work/rmetime'
alias cdcv='cd ~/work/conversations'
alias cdcvp='cd /u/apps/conversations/current'
alias cdsk='cd ~/work/skinners'
alias cdos='cd ~/work/openshutters'
alias cdoss='cd ~/work/openshutters/oss-git/current'
alias cdosc='cd ~/work/openshutters/stable/oss-git/current'
alias cdbq='cd ~/work/beqik2'
alias cdcd='cd ~/work/cockatoodemo'
alias cdlo='cd ~/work/leadingohs'
alias cdhw='cd ~/work/Myhealthworks'
alias cdmh='cd ~/work/media-hub'
alias cdyc='cd ~/work/yaml-config'

# Processes
alias tu='top -o cpu' #cpu
alias tm='top -o vsize' # memory

# Abbreviated bash commands
alias h='history'
alias l='ls -l'
alias ll='ls -l'
alias la='ls -al'
alias lh='ls -lh'
alias lg='ls -lG'
# Create a directory and change to it
function take {
	mkdir $1
	cd $1
}

# Quick editing and reloading
alias reload='source ~/.bashrc' # reload shell
alias ea='mate ~/bin/dotfiles/bash/aliases && reload' # edit aliases and reload

# MySQL

alias ms=/usr/local/mysql/bin/mysql
alias mysql=/usr/local/mysql/bin/mysql
alias mysqladmin=/usr/local/mysql/bin/mysqladmin
alias msa=/usr/local/mysql/bin/mysqladmin
alias mst='sudo mysqld_safe'
alias msp='mysqladmin -u root shutdown'
function msd {
  mysqldump --add-locks -e -n -t $1 -u root > db/$1.sql
}
function msl {
  mysql $1 -u root < db/$1.sql
}

# Apache
alias apr='sudo /usr/sbin/apachectl restart'
alias apst='sudo /usr/sbin/apachectl -k start'
alias apsp='sudo /usr/sbin/apachectl graceful-stop'
alias apce='sudo mate /private/etc/apache2/httpd.conf' #edit apache config

# Bundler
alias be='bundle exec'

# Git

# As the name implies, show the name of the current branch
function git_current_branch() {
  git symbolic-ref HEAD 2> /dev/null | sed -e 's/refs\/heads\///'
}

alias g='git status'
alias gi='git init'
alias ga='git add'
alias gau='git add -u'
alias gb='git branch'
alias gba='git branch -a'
alias gbd='git branch -d'
alias gbdd='git branch -D'
alias gc='git commit -v'
alias gca='git commit -v -a'
alias gcm='git commit --amend'
alias gco='git checkout'
alias gcb='git checkout -b'
alias gd='git diff'
alias gdm='git diff master'
alias gf='git fetch'
alias gl='git pull'
alias glr='git pull --rebase'
alias gp='git push origin HEAD:$(git_current_branch)'
alias gst='git status'
alias gr='git rebase -p'
alias grc='git rebase --continue'
alias grs='git rebase --skip'
alias gm='git merge --no-ff'
alias gmt='git mergetool'
alias gk='gitk'
alias gx='gitx'
alias gph='git push heroku'
alias gup='git fetch origin && gr origin/$(git_current_branch)'

# Commit pending changes and quote all args as message
function gg() {
	git commit -v -a -m "$*"
}
# Set up a tracking branch from [remote] [branch_name]
function gbt() {
	git branch --track $2 $1/$2
	git checkout $2
}
# Delete branch
function gbd() {
  git branch -d $1
}
# Create and checkout branch
function gcob() {
  git checkout -b $1
}
# Add remote repo on unfuddle
function gru() {
  git remote add origin git@cockatoosoftware.unfuddle.com:cockatoosoftware/$1.git
  git config remote.origin.push refs/heads/master:refs/heads/master
}
# Add remote repo on github
function grg() {
	git remote add origin git@github.com:keithpitty/$1.git
	git push origin master
}

# grb
alias grbc='grb create'

# rvm
alias rvmk='cp .rvmrc_keith .rvmrc'

# Blake
# deploy branch to integration: initial setup and deploy
function cids() {
  export BRANCH=$1 &&
  cap integration deploy:setup && 
  cap integration deploy &&
  cap integration branches:create_db &&
  cap integration branches:load_integration_clone &&
  cap integration deploy:migrate &&
  cap integration data:run_all &&
  cap integration deploy:restart &&
  unset BRANCH
}

#later deploys
function cid() {
  export BRANCH=$1 &&
  cap integration deploy &&
  cap integration deploy:migrate &&
  cap integration data:run_all &&
  cap integration deploy:restart &&
  unset BRANCH
}

# rcov for Reading Eggs
alias rcd='rm coverage.data'
alias rcc='rcov --aggregate coverage.data -o "coverage" --sort coverage --rails --exclude osx\/objc,gems\/,spec\/,features\/,lib\/tasks\/,lib\/unfuddle\/ /usr/local/bin/cucumber -- features/*.feature'
alias rcsm='rcov --aggregate coverage.data -o "coverage" --sort coverage --rails --exclude osx\/objc,gems\/,spec\/,features\/,lib\/tasks\/,lib\/unfuddle\/ /usr/local/bin/spec -- spec/models/*'
alias rcsh='rcov --aggregate coverage.data -o "coverage" --sort coverage --rails --exclude osx\/objc,gems\/,spec\/,features\/,lib\/tasks\/,lib\/unfuddle\/ /usr/local/bin/spec -- spec/helpers/*'
alias rcsj='rcov --aggregate coverage.data -o "coverage" --sort coverage --rails --exclude osx\/objc,gems\/,spec\/,features\/,lib\/tasks\/,lib\/unfuddle\/ /usr/local/bin/spec -- spec/jobs/*'

function rc() {
	rm coverage.data
	rcov --aggregate coverage.data -o "coverage" --sort coverage --rails --exclude osx\/objc,gems\/,spec\/,features\/,lib\/tasks\/,lib\/unfuddle\/ /usr/local/bin/spec -- spec/models/*
	rcov --aggregate coverage.data -o "coverage" --sort coverage --rails --exclude osx\/objc,gems\/,spec\/,features\/,lib\/tasks\/,lib\/unfuddle\/ /usr/local/bin/spec -- spec/helpers/*
	rcov --aggregate coverage.data -o "coverage" --sort coverage --rails --exclude osx\/objc,gems\/,spec\/,features\/,lib\/tasks\/,lib\/unfuddle\/ /usr/local/bin/spec -- spec/jobs/*
	rcov --aggregate coverage.data -o "coverage" --sort coverage --rails --exclude osx\/objc,gems\/,spec\/,features\/,lib\/tasks\/,lib\/unfuddle\/ /usr/local/bin/cucumber -- features/*.feature
}

# Reading Eggs
alias re12='scp rei:Sites/reports/map12assets.txt .'
alias redi="rsync -vzru --size-only --stats --delete --exclude='Thumbs.db' --exclude='.DS_Store' --exclude='.git' --exclude='.svn' rei:/Users/integrity/.integration_server/shared/bootstrap/ ~/work/readingeggs/public/bootstrap"